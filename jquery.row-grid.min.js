(function(g){function l(a,b,e){var h=0,d=[];e=e||a.children(b.itemSelector);var l=e.length-1;a.children("."+b.lastRowClass).removeClass(b.lastRowClass);e.removeAttr("style").removeClass(b.firstItemClass);var r=a.width()-(a[0].offsetWidth-a[0].clientWidth),p=[];e.each(function(b,a){a=g(a);p[b]={outerWidth:a.outerWidth(),height:a.height()}});e.each(function(a,e){e=g(e);h+=p[a].outerWidth;d.push(e);if(a===l)for(var c=0;c<d.length;c++)0===c&&d[c].addClass(b.lastRowClass),d[c].css("margin-right",c<d.length-
1?b.minMargin:0);if(h+b.maxMargin*(d.length-1)>r){var k=h+b.maxMargin*(d.length-1)-r,c=d.length;if((b.maxMargin-b.minMargin)*(c-1)<k)var s=b.minMargin,k=k-(b.maxMargin-b.minMargin)*(c-1);else s=b.maxMargin-k/(c-1),k=0;for(var q,m=0,c=0;c<d.length;c++){q=d[c];var n=p[a+parseInt(c)-d.length+1].outerWidth,f=n-n/h*k,n=Math.round(p[a+parseInt(c)-d.length+1].height*(f/n));0.5<=m+1-f%1?(m-=f%1,f=Math.floor(f)):(m+=1-f%1,f=Math.ceil(f));q.css("width",f).css("height",n).css("margin-right",c<d.length-1?s:0);
0===c&&q.addClass(b.firstItemClass)}d=[];h=0}})}g.fn.rowGrid=function(a){if(0==this.length)return console.error('No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){g(this).rowGrid(a)});if("appended"===a){a=this.data("grid-options");var b=this.children("."+a.lastRowClass),b=b.nextAll().add(b);l(this,a,b)}else if(a=g.extend({},g.fn.rowGrid.defaults,a),this.data("grid-options",a),l(this,a),a.resize)g(window).on("resize",{container:this},function(b){l(b.data.container,
a)});return this};g.fn.rowGrid.defaults={minMargin:null,maxMargin:null,resize:!0,lastRowClass:"last-row",firstItemClass:null}})(jQuery);